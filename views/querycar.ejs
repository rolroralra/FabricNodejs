<!DOCTYPE html>
<html>

<head>
  <%- include('partials/head') %>
</head>

<body>
  <div class="container">
    <i class="fas fa-book-reader"></i>
    <h1>QueryCar Page</h1>
    <p>Query car!</p>
    <%- include('partials/navbar') %>


      CarID <input type="text" name="id" /> <br>
      Maker <input type="text" name="make" /> <br>
      Model <input type="text" name="model" /> <br>
      Owner <input type="text" name="owner" /> <br>
      Colour <input type="text" name="colour" /> <br>
      <button class="btn btn-info">Submit</button>

      <div id="fabcarhead">
        <h2>Fabcar Query Result</h2>
      </div>

      <table class="styled-table">
        <thead>
          <tr>
            <th>CarID</th>
            <th>Make</th>
            <th>Model</th>
            <th>Colour</th>
            <th>Owner</th>
          </tr>
        </thead>
        <tbody id="tableContent">

        </tbody>
      </table>
  </div>

</body>
<script>

  $("button").click(function () {
    var carid = $('input[name=id]').val();
    var make = $('input[name=make]').val();
    var model = $('input[name=model]').val();
    var owner = $('input[name=owner]').val();
    var colour = $('input[name=colour]').val();


    $.post("./api/querycar", {
      id: carid,
      make: make,
      model: model,
      owner: owner,
      colour: colour,
    }, function (data, status) {
      html = '';
      if (data.response == "empty result") {
        html += '<tr>';
        html += '<td colspan="5"> Not Found Result</td>';
        html += '</tr>'
        $('#tableContent').html(html);
      }


      for (var i = 0; i < data.length; i++) {

        html += '<tr>';
        html += '<td>' + data[i].ID + ' </td>';
        html += '<td>' + data[i].make + ' </td>';
        html += '<td>' + data[i].model + ' </td>';
        html += '<td>' + data[i].colour + ' </td>';
        html += '<td>' + data[i].owner + ' </td>';
        html += '</tr>';

      }
      $('#tableContent').html(html);
    });
  });
</script>

</html>